<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Latihan DOM</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <nav class="navbar navbar-light bg-light">
            <a class="navbar-brand">Mini Ecommerce</a>
            <form class="form-inline" id="formItem">
                <input class="form-control mr-sm-2" type="search" placeholder="Search"  id="keyword" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit" id="searchItem">Search</button>
            </form>
            <button class="btn btn-primary" id="cart"><i class="fas fa-shopping-cart"></i>(0)</button>
        </nav>
        <br>    
        <div class="row mt-2" id="listBarang">            
                <!-- <div class="col-md-12 mt-2" id="listBarang"> -->
                    <script>
                        var items = [
                        ['001', 'Keyboard Logitek', 60000, 'Keyboard yang mantap untuk kantoran', 'logitek.jpg'], 
                        ['002', 'Keyboard MSI', 300000, 'Keyboard gaming MSI mekanik', 'msi.jpg'],
                        ['003', 'Mouse Genius', 50000, 'Mouse Genius biar lebih pinter', 'genius.jpeg'],
                        ['004', 'Mouse Jerry', 30000, 'Mouse yang disukai kucing', 'jerry.jpg']
                                    ]

                        var i;
                        var j;



                    function printItems(barang)
                    {
                        
                        var cardsHTML       =   "";
                        for(i = 0; i < barang.length ; i++)
                        {                            
                            cardsHTML           +=      `
                                                <div class="col-md-4 col-lg-4 col-sm-6">
                                                    <div class="card" style="width: 18rem;">
                                                        <img src="${barang[i][4]}" class="card-img-top" alt="...">
                                                        <div class="card-body">
                                                            <h5 class="card-title" id="itemName">${barang[i][1]}</h5>
                                                            <p class="card-text" id="itemDesc">${barang[i][3]}</p>
                                                            <p class="card-text">Rp ${barang[i][2]},00</p>
                                                            <a href="#" class="btn btn-primary" id="addCart">Tambahkan ke keranjang</a>
                                                        </div>
                                                    </div>
                                                </div>                                            
                            `
                        }
                        var listBarang          =   document.getElementById("listBarang")
                        listBarang.innerHTML    =   cardsHTML
                        return cardsHTML;

                        console.log("ini yang hasil cari " ,cardsHTML)
                    }

                    printItems(items)


                    var formItem                =   document.getElementById("formItem");

                    formItem.addEventListener("submit", function (e){
                        //untuk mencegah reload, karena default form submit itu reload
                        e.preventDefault()

                        //mendapatkan value dari input keyword
                        var keyword             =   document.getElementById("keyword").value

                        //filter array
                        var filteredItems       =   []
                        for(j = 0; j < items.length; j++)
                        {
                            //cari data nama di element array apakah ada atau tidak
                            if(items[j][1].toLowerCase().includes(keyword.toLowerCase()))
                            {
                                filteredItems.push(items[j])
                            }
                        }

                        printItems(filteredItems)

                        console.log("filter items", filteredItems)
                    })



                    function filterring(keyword)
                    {
                        var filteredItems       =   []
                        for(j = 0; j < items.length; j++)
                        {
                            //cari data nama di element array apakah ada atau tidak
                            if(items[j][1].toLowerCase().includes(keyword.toLowerCase()))
                            {
                                filteredItems.push(items[j])
                            }
                        }
                        return filteredItems
                    }

                    var inputKeyword            =   document.getElementById("keyword")
                    inputKeyword.addEventListener("keyup", function(e)
                    {
                        var keyword             =   e.target.value

                        var filteredItems       =   filterring(keyword)

                        printItems(filteredItems)
                        
                    })
                    
                    </script>
                <!-- </div> -->
            
        </div>
    </div>



        <!-- <script>
            var searchForm                  =   document.getElementById("formItem");
            var searchBar                   =   document.getElementById("searchItem");
            
            var keyWordSearch               =   document.getElementById("keyword");
            var cardData                    =   document.getElementById("output_cards");
            var searchItem                  =   document.getElementById("itemName")
            var itemSearch                  =   cardData.querySelectorAll('itemSearch.itemName');
        
            searchBar.addEventListener('click',filterNames);

            console.log(itemSearch)
            function filterNames()
            {
                for(let i = 0; i < itemSearch.length; i++)
                {
                    let a                   =   itemSearch[i].getElementsByTagName('h5')[0];

                    console.log(a);
                    if(a.innerHTML.toUpperCase().indexOf(keyWordSearch) > -1)
                    {
                        itemSearch[i].style.display     =   '';
                    }
                    else
                    {
                        itemSearch[i].style.display     =   'none';
                    }
                }
            }

        </script> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>